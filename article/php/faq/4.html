<!doctype html>
<html class="no-js" lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>php安装mongodb扩展</title>
    <meta name="description" content="php支持mongodb的操作，需要安装mongodb扩展。分别介绍一下php在windows系统和linux安装mongodb扩展的步骤。">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="Cache" content="no-cache">

    <link rel="stylesheet" href="http://localhost/css/bootstrap.css">
    <link rel="stylesheet" href="http://localhost/css/dashidan.css">

    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?6632e058970afc4f6d1475330c7682cd";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>
<body>
<nav class="navbar navbar-default">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://m.dashidan.com/index.html">大屎蛋教程网</a>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
            <li><a href="http://m.dashidan.com/index.html">首页</a></li>
            <li><a href="http://m.dashidan.com/about.html">关于</a></li>
            <li><a href="http://m.dashidan.com/thanks.html">鸣谢</a></li>
        </ul>
    </div>
</nav>

<div class="container-fluid">
    <div>
        <a href="http://m.dashidan.com/index.html">首页</a> > <a
            href="http://m.dashidan.com/article/php/index.html">php</a> > faq
        > 4.php安装mongodb扩展
    </div>

    <div class="single_line">
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-right">
                <a href="http://m.dashidan.com/article/php/faq/3.html"> &lt; 上一篇</a>
        </div>
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-center">
            <a href="http://m.dashidan.com/article/php/index.html">目录</a>
        </div>
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-left">
                <a href="http://m.dashidan.com/article/php/faq/5.html"> 下一篇 &gt;</a>
        </div>
    </div>

    <div class="dsd_content">
        <div class="col-12">
            <article class="dsd_title_1"><h1>4.php安装mongodb扩展</h1></article>
            <div id="xs_content_border">
                <div><div class="dsd_catalog"><h3>目录</h3><a href="#1">1 下载php的mongodb扩展组件</a><br><a href="#2">2 windows系统php安装mongodb扩展</a><br><a href="#2.1">&nbsp;&nbsp;2.1 下载DLL文件</a><br><a href="#2.2">&nbsp;&nbsp;2.2 复制php_mongodb.dll文件</a><br><a href="#2.3">&nbsp;&nbsp;2.3 修改php.ini</a><br><a href="#2.4">&nbsp;&nbsp;2.4 重启php程序</a><br><a href="#2.5">&nbsp;&nbsp;2.5 查看phpinfo中是否有mongodb模块</a><br><a href="#3">3 linux系统php安装mongodb扩展</a><br><a href="#3">3 ubuntu安装php mongodb扩展</a><br><a href="#3.1">&nbsp;&nbsp;3.1 通过apt-get安装php-mongodb</a><br><a href="#3.1">&nbsp;&nbsp;3.1 执行安装mongo扩展命令</a><br><a href="#3.2">&nbsp;&nbsp;3.2 修改php.ini加入mongo.so</a><br><a href="#3.2">&nbsp;&nbsp;3.2 通过源码安装mongob扩展</a><br><a href="#3.2">&nbsp;&nbsp;3.2 修改php.ini加入extension=mongo.so</a></div></div><div class="jumbotron">
<p>php支持mongodb的操作，需要安装mongodb扩展。分别介绍一下php在windows系统和linux安装mongodb扩展的步骤。</p>  
</div>
<div id="1"><h3>1 下载php的mongodb扩展组件</h3></div>
<p><a href="http://php.net/manual/en/mongo.installation.php">php的mongodb扩展参考文章</a>,包含以下安装方式。</p>
<ul>
<li>Manual Installation</li>
<li>Installing on *NIX</li>
<li>Installing on Windows</li>
<li>OS X</li>
<li>Gentoo</li>
<li>Red Hat</li>
<li>Third-Party Installation Instructions</li>
</ul>
<p>以windows和linux为例分别说一下安装过程.</p>
<div id="2"><h3>2 windows系统php安装mongodb扩展</h3></div>
<div id="2.1"class="dsd_title_c_2"><h4>2.1 下载DLL文件</h4></div>
<p>windows系统的php-mongo扩展分2种，线程安全和非线程安全的。推荐采用线程安全的版本。</p>
<p><a href="https://windows.php.net/downloads/pecl/releases/mongo/1.6.16/php_mongo-1.6.16-5.6-ts-vc11-x64.zip">64位 线程安全版 php-mongo扩展下载链接</a>
<a href="https://windows.php.net/downloads/pecl/releases/mongo/1.6.16/php_mongo-1.6.16-5.6-nts-vc11-x64.zip">64位 非线程安全版 php-mongo扩展下载链接</a></p>
<p>区分自己的系统是64位还是32位，可以参考<a href="http://localhost/article/windows/faq/1.html">windows系统是32位还是64位</a></p>
<div id="2.2"class="dsd_title_c_2"><h4>2.2 复制php_mongodb.dll文件</h4></div>
<p>下载完成后解压缩，将其中的php_mongodb.dll 文件，复制到php安装目录下的ext目录中。</p>
<div id="2.3"class="dsd_title_c_2"><h4>2.3 修改php.ini</h4></div>
<p>修改php.ini, 加入extension=php_mongodb.dll。</p>
<div id="2.4"class="dsd_title_c_2"><h4>2.4 重启php程序</h4></div>
<p>打开windows任务管理器，找到php进程，点右键停止进程。</p>
<div id="2.5"class="dsd_title_c_2"><h4>2.5 查看phpinfo中是否有mongodb模块</h4></div>
<p>将以下代码保存为info.php，放在web根目录，通过浏览器输入http://localhost/info.php，查看phpinfo信息.</p>
<pre class="prettyprint"><code>&lt;?php
phpinfo();
</code></pre>
<p>在显示的信息网页中，搜索mongodb，查看信息,如果有mongodb相关信息，说明配置成功。</p>
<p>信息显示如图所示:</p>
<p><img class="center-block img-responsive" src="http://localhost/img/php/faq/4-2.png" alt="4-2" /></p>
<div id="3"><h3>3 ubuntu安装php mongodb扩展</h3></div>
<div id="3.1"class="dsd_title_c_2"><h4>3.1 通过apt-get安装php-mongodb</h4></div>
<pre class="prettyprint"><code>apt-get install php-mongodb 
</code></pre>
<div id="3.2"class="dsd_title_c_2"><h4>3.2 修改php.ini加入mongo.so</h4></div>
<pre class="prettyprint"><code>extension=mongo.so
</code></pre>
<div id="3"><h3>3 linux系统php安装mongodb扩展</h3></div>
<div id="3.1"class="dsd_title_c_2"><h4>3.1 执行安装mongo扩展命令</h4></div>
<pre class="prettyprint"><code>$ sudo pecl install mongo
</code></pre>
<p>在Ubuntu12.04版本系统上跑这个命令的时候报错"WARNING: "pecl/mongo" is deprecated in favor of "channel:///mongodb"
pecl/mongo requires PHP (version &gt;= 5.3.0, version &lt;= 5.99.99)".</p>
<p>详细报错信息:</p>
<pre class="prettyprint"><code>WARNING: "pecl/mongo" is deprecated in favor of "channel:///mongodb"
pecl/mongo requires PHP (version &gt;= 5.3.0, version &lt;= 5.99.99), installed version is 7.0.28-0ubuntu0.16.04.1
No valid packages found
nstall failed
</code></pre>
<p>服务器安装的php版本是PHP Version 7.0.28-0ubuntu0.16.04.1。这个命令与这个版本不兼容。可以通过源码安装。</p>
<div id="3.2"class="dsd_title_c_2"><h4>3.2 通过源码安装mongob扩展</h4></div>
<p>下载源码:</p>
<pre class="prettyprint"><code>wget http://pecl.php.net/get/mongo-1.6.16.tgz
</code></pre>
<p>解压缩文件</p>
<pre class="prettyprint"><code>tar -zxvf mongo-1.6.16.tgz
</code></pre>
<p>进入解压后的文件目录</p>
<pre class="prettyprint"><code>cd mongo-1.6.16
</code></pre>
<p>执行phpize命令编译源码。这个命令在php-dev包中，如果找不到这个包，需要安装对应版本的php-dev包。</p>
<pre class="prettyprint"><code>phpize
./configure
make
make install
</code></pre>
<div id="3.2"class="dsd_title_c_2"><h4>3.2 修改php.ini加入extension=mongo.so</h4></div>
<pre class="prettyprint"><code>extension=mongo.so
</code></pre>
            </div>
        </div>
    </div>
</div>

<hr>

<footer class="single_line">
    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-right">
            <a href="http://m.dashidan.com/article/php/faq/3.html"> &lt; 上一篇</a>
    </div>
    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-center">
        <a href="http://m.dashidan.com/article/php/index.html">目录</a>
    </div>
    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 text-left">
            <a href="http://m.dashidan.com/article/php/faq/5.html"> 下一篇 &gt;</a>
    </div>
</footer>

<script src="http://m.dashidan.com/js/jquery-3.2.1.min.js"></script>
<script src="http://m.dashidan.com/js/vendor/modernizr-custom.js"></script>
<script src="http://m.dashidan.com/js/bootstrap.js"></script>
<script src="http://m.dashidan.com/js/google-code-prettify/run_prettify.js"></script>
<script src="http://m.dashidan.com/js/main.js"></script>
</body>
</html>
